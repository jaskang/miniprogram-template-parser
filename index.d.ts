/* auto-generated by NAPI-RS */
/* eslint-disable */
export interface Attribute {
  name: string
  value?: Array<AttributeValue>
  loc: Range
}

export type AttributeValue =
  | { type: 'Text', content: string, loc: Range }
  | { type: 'Expression', content: string, loc: Range }

/** AST节点类型，代表WXML文档中的各种元素 */
export type Node =
  | { type: 'Element', name: string, attrs: Array<Attribute>, children: Array<Node>, selfClosing: boolean, firstAttrSameLine: boolean, loc: Range }
  | { type: 'Text', content: string, loc: Range }
  | { type: 'Comment', content: string, loc: Range }
  | { type: 'Expression', content: string, loc: Range }

/**
 * 解析 WXML 字符串并返回 AST
 *
 * 返回 AST 对象
 *
 * 由于 napi-rs 3.0.0-alpha 版本的限制，我们返回一个包装对象
 * 通过 toJson() 方法可以获取 JSON 格式的 AST
 */
export declare function parse(input: string): Root

/** 定义位置信息，用于标记AST节点在源码中的位置 */
export interface Position {
  /** chars 索引, 从 0 开始 */
  offset: number
  /** 行号，从1开始 */
  line: number
  /** 列号，从1开始 */
  column: number
}

export interface Range {
  start: Position
  end: Position
}

export interface Root {
  children: Array<Node>
  loc: Range
}

/** Syntax error when parsing tags, not `<script>` or `<style>` tag. */
export interface SyntaxError {
  kind: SyntaxErrorKind
  offset: number
  line: number
  column: number
}

export declare const enum SyntaxErrorKind {
  ExpectAttrName = 0,
  ExpectAttrValue = 1,
  ExpectCloseTag = 2,
  ExpectComment = 3,
  ExpectDoctype = 4,
  ExpectElement = 5,
  ExpectFrontMatter = 6,
  ExpectIdentifier = 7,
  ExpectMustacheInterpolation = 8,
  ExpectSelfCloseTag = 9,
  ExpectTagName = 10,
  ExpectTextNode = 11,
  ExpectExpression = 12
}

export type Value =
  | { type: 'Text', content: string, position: Position }
  | { type: 'Expression', content: string, position: Position }
